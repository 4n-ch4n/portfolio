---
interface NavItem {
  label: string;
  href: string;
}

const navItems: NavItem[] = [
  {
    label: "Home",
    href: "#home",
  },
  {
    label: "Experience",
    href: "#experience",
  },
  {
    label: "Skills",
    href: "#skills",
  },
  {
    label: "Projects",
    href: "#projects",
  },
];
---

<div class="flex w-full justify-center">
  <nav
    id="main-nav"
    class="fixed bottom-0 left-1/2 z-100 w-[90%] max-w-md -translate-x-1/2 rounded-2xl border-2 border-white/20 bg-linear-to-r from-white/90 to-white/80 px-3 py-4 shadow-2xl backdrop-blur-xl transition-all duration-300 md:top-6 md:bottom-auto md:max-w-2xl md:px-6 md:py-5 h-14"
  >
    <ul class="flex items-center justify-between gap-1 md:gap-4 px-2 h-full">
      {
        navItems.map((item) => (
          <li class="flex-1 md:flex-none">
            <a
              href={item.href}
              data-nav-link
              class="nav-link group relative flex flex-col items-center gap-2 rounded-xl px-3 py-3 text-gray-600 transition-all duration-300 hover:text-slate-500 md:flex-row md:justify-center md:gap-2 md:px-5 md:py-4"
            >
              <span class="text-[10px] font-semibold tracking-wide md:text-sm">
                {item.label}
              </span>
            </a>
          </li>
        ))
      }
    </ul>
  </nav>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const sections = document.querySelectorAll("section[id]");
    const navLinks = document.querySelectorAll("[data-nav-link]");

    function setActiveLink() {
      const scrollY = window.scrollY;

      sections.forEach((section) => {
        const sectionHeight = (section as HTMLElement).offsetHeight;
        const sectionTop = (section as HTMLElement).offsetTop - 100;
        const sectionId = section.getAttribute("id");

        if (scrollY > sectionTop && scrollY <= sectionTop + sectionHeight) {
          navLinks.forEach((link) => {
            link.classList.remove("active");
            if (link.getAttribute("href") === `#${sectionId}`) {
              link.classList.add("active");
            }
          });
        }
      });
    }

    window.addEventListener("scroll", setActiveLink);
    setActiveLink();

    // Smooth scroll
    navLinks.forEach((link) => {
      link.addEventListener("click", (e) => {
        e.preventDefault();
        const targetId = link.getAttribute("href")?.substring(1);
        const targetSection = document.getElementById(targetId || "");
        if (targetSection) {
          targetSection.scrollIntoView({ behavior: "smooth", block: "start" });
        }
      });
    });
  });
</script>

<style>
  .nav-link.active {
    color: var(--sec);
  }

  .nav-link.active span::before {
    content: "";
    display: inline-block;
    width: 6px;
    height: 6px;
    background-color: var(--sec);
    border-radius: 50%;
    margin-right: 6px;
    margin-bottom: 2px;
  }

  .nav-link:hover {
    transform: translateY(-1px);
  }

  .nav-link:active {
    transform: scale(0.95);
  }

  nav {
    box-shadow:
      0 10px 40px rgba(0, 0, 0, 0.1),
      0 2px 8px rgba(0, 0, 0, 0.06);
  }
</style>
